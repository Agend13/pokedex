<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pokédex (DE)</title>
    <!-- Tailwind Play CDN for styles (no config needed) -->
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    <!-- === POKEDEX FIXES (START) === -->
    <!-- === POKEDEX THEME OVERRIDE (REPLACE OLD FIX BLOCK) === -->
<style>
  /* SEARCH: sichtbar & nice focus */
  input[type="text"], input[type="search"]{
    background:#fff!important; color:#111!important; border:1px solid #e5e7eb;
    border-radius:14px; padding:12px 16px; caret-color:#111;
    box-shadow:0 1px 2px rgba(0,0,0,.04);
  }
  input::placeholder{ color:#6b7280!important; }

  /* CARD LOOK */
  .poke-card{
    background:#fff; border:1px solid #e5e7eb; border-radius:18px; overflow:hidden;
    box-shadow:0 2px 6px rgba(0,0,0,.05); transition:transform .12s ease, box-shadow .12s ease;
  }
  .poke-card:hover{ transform:translateY(-2px); box-shadow:0 6px 16px rgba(0,0,0,.10); }

  /* IMAGE AREA: zeigt ganze Karte, kein Crop */
  .poke-img-wrap{
    position:relative; width:100%;
    aspect-ratio: 63 / 88;           /* nah am echten Trading-Card-Format */
    background:#f3f4f6;              /* neutral-100 */
    display:flex; align-items:center; justify-content:center;
    overflow:hidden;
  }
  .poke-card-img{ width:100%; height:100%; object-fit:contain!important; display:block; }

  /* SMALL BADGE OVERLAY statt großer schwarzer Balken */
  .poke-badge{
    position:absolute; left:8px; bottom:8px;
    padding:2px 10px; font-size:12px; font-weight:700; letter-spacing:.2px;
    color:#fff; background:rgba(17,24,39,.75); /* slate-900 @ 75% */
    border-radius:9999px; line-height:1.4; white-space:nowrap;
    border:1px solid rgba(255,255,255,.15);
  }

  /* TEXT UNTER DEM BILD */
  .poke-card-body{ padding:10px 12px 12px; }
  .poke-card-name{
    color:#111!important; font-size:15px; font-weight:700; line-height:1.25;
    overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
  }
  .poke-card-sub{ color:#6b7280; font-size:12px; font-weight:600; margin-top:2px; }

  /* Dark page bg (optional – falls du dunkel willst) */
  body{ background:#0b0f14; }
</style>

<script>
/* Enhancer: macht aus vorhandenen Karten ein schönes Layout.
   - wrappt das IMG korrekt
   - setzt object-contain
   - erzeugt Badge (#001) im Bild
   - zeigt Name + kleine Subline darunter
*/
(function () {
  const pad3 = (n)=>{ n=parseInt(n,10); return isNaN(n)?"":String(n).padStart(3,"0"); };
  const dexFromSrc = (src)=>{ const m=(src||"").match(/(\d{1,4})(?=\D*$)/); return m?pad3(m[1]):""; };
  const t = (s)=> (s||"").toString().trim();

  function enhance(card){
    if(!card || card.__enhanced) return;
    const img = card.querySelector("img"); if(!img) return;

    /* Bild-Wrapper */
    let wrap = img.closest(".poke-img-wrap");
    if(!wrap){
      wrap = document.createElement("div");
      wrap.className = "poke-img-wrap";
      img.parentElement.insertBefore(wrap, img);
      wrap.appendChild(img);
    }
    img.classList.remove("object-cover","object-fill","h-full");
    img.removeAttribute("height"); img.removeAttribute("width");
    img.classList.add("poke-card-img");

    /* Daten bestimmen */
    const name = t(img.getAttribute("data-name")) || t(img.alt) || t(img.title) || "Unbekannt";
    const rawDex = t(img.getAttribute("data-dex")) || t(img.getAttribute("data-id")) || "";
    const dex = pad3(rawDex || dexFromSrc(img.src) || "");

    /* Badge im Bild */
    if(!wrap.querySelector(".poke-badge")){
      const badge = document.createElement("div");
      badge.className = "poke-badge";
      badge.textContent = dex ? `#${dex}` : "#???";
      wrap.appendChild(badge);
    }

    /* Textbereich */
    let body = card.querySelector(".poke-card-body");
    if(!body){
      body = document.createElement("div");
      body.className = "poke-card-body";
      card.appendChild(body);
    }
    body.innerHTML = `
      <div class="poke-card-name" title="${name}">${name}</div>
      <div class="poke-card-sub">${dex ? "#" + dex : ""}</div>
    `;

    /* Card-Grundklasse sicherstellen */
    card.classList.add("poke-card");
    card.__enhanced = true;
  }

  function enhanceAll(){
    document.querySelectorAll(".poke-card, .card, [data-poke-card], li, .grid > *").forEach(n=>{
      if(n.querySelector && n.querySelector("img")) enhance(n);
    });
  }

  if(document.readyState==="loading"){ document.addEventListener("DOMContentLoaded", enhanceAll); }
  else { enhanceAll(); }
  new MutationObserver(enhanceAll).observe(document.body, {childList:true, subtree:true});
})();
</script>
<!-- === /POKEDEX THEME OVERRIDE === -->
  </body>
</html>
